<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DropMind念投 — 扔进去，搞定了</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 登录/注册界面 -->
  <div class="auth-screen" id="auth-screen">
    <div class="auth-card">
      <div class="auth-logo">✦ DropMind念投</div>
      <p class="auth-sub">扔进去，搞定了。</p>
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">登录</button>
        <button class="auth-tab" data-tab="register">注册</button>
      </div>
      <form class="auth-form" id="auth-form">
        <input type="text" id="auth-username" placeholder="用户名" required autocomplete="username">
        <input type="password" id="auth-password" placeholder="密码" required autocomplete="current-password">
        <button type="submit" class="auth-submit" id="auth-submit">登录</button>
      </form>
      <div class="auth-error" id="auth-error"></div>
    </div>
  </div>

  <div id="app" style="display:none">
    <!-- 左侧待办事项面板 -->
    <aside class="todo-sidebar" id="todo-sidebar">
      <div class="todo-header">
        <h3>✅ 待办事项</h3>
        <span class="todo-count" id="todo-count">0</span>
      </div>
      <div class="todo-input-wrap">
        <input type="text" id="todo-input" placeholder="添加新待办..." />
        <button id="btn-add-todo" class="todo-add-btn">+</button>
      </div>
      <div class="todo-filters">
        <button class="todo-filter active" data-filter="todo">📝 待办</button>
        <button class="todo-filter" data-filter="doing">🔄 进行中</button>
        <button class="todo-filter" data-filter="done">✅ 已完成</button>
      </div>
      <div class="todo-list" id="todo-list"></div>
      <div class="todo-footer" id="todo-footer" style="display:none">
        <button id="btn-clear-done" class="todo-clear-btn">🧹 清除已完成</button>
      </div>
    </aside>

    <!-- 顶部导航 -->
    <nav class="top-nav">
      <div class="nav-left">
        <button class="sidebar-toggle" id="btn-sidebar-toggle">☰</button>
        <span class="logo">✦ DropMind念投</span>
      </div>
      <div class="nav-right">
        <button class="theme-toggle" id="btn-theme" title="切换主题">
          <span class="icon-sun">☀️</span>
          <span class="icon-moon">🌙</span>
        </button>
        <button class="nav-btn" id="btn-library" title="知识库">📚</button>
        <button class="nav-btn" id="btn-search" title="搜索">🔍</button>
        <button class="nav-btn" id="btn-settings" title="设置">⚙️</button>
      </div>
    </nav>

    <!-- 主界面：输入区 -->
    <main class="main-view" id="main-view">
      <div class="hero">
        <h1 class="hero-title">扔进去，搞定了。</h1>
        <p class="hero-sub">文字、链接、视频、语音、图片 — 什么都能扔</p>
      </div>

      <div class="input-area">
        <div class="input-box" id="input-box">
          <textarea id="user-input" placeholder="复制粘贴任何东西到这里..." rows="3"></textarea>
          <div class="input-actions">
            <button class="action-btn" id="btn-camera" title="拍照/截图">📷</button>
            <button class="action-btn" id="btn-doc" title="文档">📄</button>
            <button class="action-btn" id="btn-audio" title="音频">🎵</button>
            <button class="action-btn" id="btn-video" title="视频">🎬</button>
            <button class="action-btn" id="btn-file" title="附件">📎</button>
            <button class="send-btn" id="btn-send" title="发送">
              <span class="send-icon">⏎</span>
            </button>
          </div>
        </div>
        <button class="voice-standalone-btn" id="btn-voice" title="语音输入">🎤 语音输入</button>
        <input type="file" id="file-input" hidden accept="*/*">
        <input type="file" id="doc-input" hidden accept=".txt,.md,.doc,.docx,.pdf,.html,.htm,.csv,.json,.xls,.xlsx,.ppt,.pptx">
        <input type="file" id="audio-input" hidden accept=".mp3,.wav,.ogg,.m4a,.aac,.flac,.wma">
        <input type="file" id="video-input" hidden accept=".mp4,.mov,.avi,.mkv,.webm,.flv,.wmv">
      </div>

      <!-- 快捷示例 -->
      <div class="quick-examples">
        <span class="example-label">试试看：</span>
        <button class="example-chip" data-example="https://github.com/anthropics/claude-code">📌 收藏书签</button>
        <button class="example-chip" data-example="https://www.youtube.com/watch?v=dQw4w9WgXcQ">🎬 YouTube 视频</button>
        <button class="example-chip" data-example="人工智能正在重塑教育行业。从个性化学习路径到自动评估系统，AI 技术让每个学生都能获得量身定制的学习体验。">💡 一段灵感</button>
        <button class="example-chip" data-example="https://paulgraham.com/greatwork.html">📖 一篇文章</button>
      </div>

      <!-- 最近处理 -->
      <div class="recent-section" id="recent-section">
        <h3 class="section-title">最近处理</h3>
        <div class="cards-grid" id="recent-cards"></div>
      </div>
    </main>

    <!-- 处理中状态 -->
    <div class="processing-overlay" id="processing-overlay" style="display:none">
      <div class="processing-card">
        <div class="processing-title">处理中...</div>
        <div class="processing-steps" id="processing-steps"></div>
      </div>
    </div>

    <!-- 结果展示 -->
    <div class="result-view" id="result-view" style="display:none">
      <button class="back-btn" id="btn-back">← 返回</button>
      <div class="result-content" id="result-content"></div>
    </div>

    <!-- 知识库面板 -->
    <div class="library-panel" id="library-panel" style="display:none">
      <div class="panel-header">
        <h2>📚 知识库</h2>
        <button class="close-btn" id="btn-close-library">✕</button>
      </div>
      <div class="library-tabs">
        <button class="tab active" data-tab="all">全部</button>
        <button class="tab" data-tab="bookmark">📌 书签</button>
        <button class="tab" data-tab="note">📝 笔记</button>
        <button class="tab" data-tab="inspiration">💡 灵感</button>
        <button class="tab" data-tab="article">✍️ 文章</button>
        <button class="tab" data-tab="study">🎓 学习包</button>
      </div>
      <div class="library-search">
        <input type="text" id="library-search-input" placeholder="搜索知识库...">
      </div>
      <div class="library-items" id="library-items"></div>
    </div>

    <!-- 搜索面板 -->
    <div class="search-panel" id="search-panel" style="display:none">
      <div class="panel-header">
        <h2>🔍 智能搜索</h2>
        <button class="close-btn" id="btn-close-search">✕</button>
      </div>
      <div class="search-box">
        <input type="text" id="global-search-input" placeholder="找到我之前保存的关于..." autofocus>
      </div>
      <div class="search-results" id="search-results"></div>
    </div>
    <!-- 设置面板 -->
    <div class="settings-panel" id="settings-panel" style="display:none">
      <div class="panel-header">
        <h2>⚙️ 设置</h2>
        <button class="close-btn" id="btn-close-settings">✕</button>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <div class="settings-label">账号</div>
          <div class="settings-user" id="settings-user"></div>
        </div>
        <div class="settings-section">
          <div class="settings-label">外观</div>
          <div class="settings-row">
            <span>深色模式</span>
            <button class="settings-theme-btn" id="settings-theme-toggle">☀️ 浅色</button>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-label">AI 模型</div>
          <div class="settings-row">
            <span>默认模型</span>
            <select class="settings-select" id="settings-model">
              <option value="claude-4-opus">Claude 4 Opus</option>
              <option value="claude-4-sonnet">Claude 4 Sonnet</option>
              <option value="claude-3.5-sonnet">Claude 3.5 Sonnet</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
            </select>
          </div>
          <div class="settings-row">
            <span>API Key</span>
            <button class="settings-api-btn" id="btn-api-key">配置 →</button>
          </div>
          <div class="api-key-panel" id="api-key-panel" style="display:none">
            <div class="api-key-group">
              <label>Anthropic API Key</label>
              <input type="password" class="api-key-input" id="api-key-anthropic" placeholder="sk-ant-...">
            </div>
            <div class="api-key-group">
              <label>Google AI API Key</label>
              <input type="password" class="api-key-input" id="api-key-google" placeholder="AIza...">
            </div>
            <button class="api-key-save-btn" id="btn-save-api-keys">保存密钥</button>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-label">坚果云同步</div>
          <div class="settings-row">
            <span>同步状态</span>
            <span class="sync-status" id="sync-status">未连接</span>
          </div>
          <div class="nutstore-config" id="nutstore-config">
            <div class="api-key-group">
              <label>坚果云账号（邮箱）</label>
              <input type="text" class="api-key-input" id="nutstore-account" placeholder="your@email.com">
            </div>
            <div class="api-key-group">
              <label>应用密码（在坚果云安全选项中生成）</label>
              <input type="password" class="api-key-input" id="nutstore-password" placeholder="应用专用密码">
            </div>
            <div class="nutstore-actions">
              <button class="api-key-save-btn" id="btn-save-nutstore">保存并连接</button>
              <button class="nutstore-sync-btn" id="btn-sync-now" style="display:none">🔄 立即同步</button>
            </div>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-label">快捷键</div>
          <div class="settings-row">
            <span>语音录制</span>
            <button class="hotkey-btn" id="btn-voice-hotkey">未设置</button>
          </div>
          <div class="hotkey-hint" id="hotkey-hint" style="display:none">按下想要的快捷键组合...</div>
        </div>
        <div class="settings-section">
          <div class="settings-label">数据</div>
          <div class="settings-row">
            <span>知识库条目</span>
            <span id="settings-kb-count">0</span>
          </div>
          <div class="settings-row">
            <span>待办事项</span>
            <span id="settings-todo-count">0</span>
          </div>
        </div>
        <div class="settings-section">
          <button class="settings-logout-btn" id="btn-logout">退出登录</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 语音录制浮层 -->
  <div class="voice-overlay" id="voice-overlay" style="display:none">
    <div class="voice-card">
      <div class="voice-status" id="voice-status">
        <div class="voice-wave">
          <span></span><span></span><span></span><span></span><span></span>
        </div>
        <div class="voice-label">正在聆听...</div>
      </div>
      <div class="voice-preview" id="voice-preview"></div>
      <div class="voice-actions">
        <button class="voice-cancel-btn" id="voice-cancel">取消</button>
        <button class="voice-stop-btn" id="voice-stop">完成</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="intent-engine.js"></script>
  <script src="pipelines.js"></script>
  <script src="knowledge-base.js"></script>
  <script src="voice-recorder.js"></script>
  <script src="todo.js"></script>
  <script src="app.js"></script>
</body>
</html>
